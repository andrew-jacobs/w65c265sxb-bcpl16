
Portable 65xx Assembler [17.12]

                             ;===============================================================================
                             ;
                             ; `7MM"""Yp,   .g8"""bgd `7MM"""Mq.`7MMF'
                             ;   MM    Yb .dP'     `M   MM   `MM. MM
                             ;   MM    dP dM'       `   MM   ,M9  MM
                             ;   MM"""bg. MM            MMmmdM9   MM
                             ;   MM    `Y MM.           MM        MM      ,
                             ;   MM    ,9 `Mb.     ,'   MM        MM     ,M
                             ; .JMMmmmd9    `"bmmmd'  .JMML.    .JMMmmmmMMM
                             ;
                             ; BCPL for the WDC W65C265SXB
                             ;-------------------------------------------------------------------------------
                             ; Copyright (C),2018 Andrew John Jacobs.
                             ; All rights reserved.
                             ;
                             ; This work is licensed under a Creative Commons Attribution NonCommercial-
                             ; ShareAlike 4.0 International License.
                             ;
                             ; See here for details:
                             ;
                             ;       https://creativecommons.org/licenses/by-nc-sa/4.0/
                             ;
                             ;-------------------------------------------------------------------------------
                             
                                             .65816
                             
                                             .include "w65c265.inc"
                             ;===============================================================================
                             ; __        ____  ____   ____ ____   __  ____
                             ; \ \      / / /_| ___| / ___|___ \ / /_| ___|
                             ;  \ \ /\ / / '_ \___ \| |     __) | '_ \___ \
                             ;   \ V  V /| (_) |__) | |___ / __/| (_) |__) |
                             ;    \_/\_/  \___/____/ \____|_____|\___/____/
                             ;
                             ; Western Design Center W65C265 device definitions
                             ;-------------------------------------------------------------------------------
                             ; Copyright (C)2015 HandCoded Software Ltd.
                             ; All rights reserved.
                             ;
                             ; This work is made available under the terms of the Creative Commons
                             ; Attribution-NonCommercial-ShareAlike 4.0 International license. Open the
                             ; following URL to see the details.
                             ;
                             ; http://creativecommons.org/licenses/by-nc-sa/4.0/
                             ;
                             ;===============================================================================
                             ; Notes:
                             ;
                             ; Various macros and definitions for the W65C265 microcontroller.
                             ;
                             ;===============================================================================
                             ; Revision History:
                             ;
                             ; 2015-12-18 AJ Initial version

Portable 65xx Assembler [17.12]

                             ;-------------------------------------------------------------------------------
                             
                             ;===============================================================================
                             ; Hardware Registers
                             ;-------------------------------------------------------------------------------
                             
                             ;00DF00-1F CS0 Port Replacement & Expansion uninitialized
                             
         0000DF00          = PD0             .equ    $00DF00         ; Port 0 Data Register
         0000DF01          = PD1             .equ    $00DF01         ; Port 1 Data Register
         0000DF02          = PD2             .equ    $00DF02         ; Port 2 Data Register
         0000DF03          = PD3             .equ    $00DF03         ; Port 3 Data Register
         0000DF04          = PDD0            .equ    $00DF04         ; Port 0 Data Direction Register
         0000DF05          = PDD1            .equ    $00DF05         ; Port 1 Data Direction Register
         0000DF06          = PDD2            .equ    $00DF06         ; Port 2 Data Direction Register
         0000DF07          = PDD3            .equ    $00DF07         ; Port 3 Data Direction Register
                             
         0000DF20          = PD4             .equ    $00DF20         ; Port 4 Data Register
         0000DF21          = PD5             .equ    $00DF21         ; Port 5 Data Register
         0000DF22          = PD6             .equ    $00DF22         ; Port 6 Data Register
         0000DF23          = PD7             .equ    $00DF23         ; Port 7 Data Register
         0000DF24          = PDD4            .equ    $00DF24         ; Port 4 Data Direction Register
         0000DF25          = PDD5            .equ    $00DF25         ; Port 5 Data Direction Register
         0000DF26          = PDD6            .equ    $00DF26         ; Port 6 Data Direction Register
         0000DF27          = PCS7            .equ    $00DF27         ; Port 7 Chip Select
                             
                             ;00DF28-3F --- Reserved uninitialized
                             
         0000DF40          = BCR             .equ    $00DF40         ; Bus Control Register
         0000DF41          = SSCR            .equ    $00DF41         ; System Speed Control Register
         0000DF42          = TCR             .equ    $00DF42         ; Timer Control Register
         0000DF43          = TER             .equ    $00DF43         ; Timer Enable Register
         0000DF44          = TIFR            .equ    $00DF44         ; Timer Interrupt Flag Register
         0000DF45          = EIFR            .equ    $00DF45         ; Edge Interrupt Flag Register
         0000DF46          = TIER            .equ    $00DF46         ; Timer Interrupt Enable Register
         0000DF47          = EIER            .equ    $00DF47         ; Edge Interrupt Enable Register
         0000DF48          = UIFR            .equ    $00DF48         ; UART Interrupt Flag Register
         0000DF49          = UIER            .equ    $00DF49         ; UART Interrupt Enable Register
                             
         0000DF50          = T0LL            .equ    $00DF50         ; Timer 0 Latch Low
         0000DF51          = T0LH            .equ    $00DF51         ; Timer 0 Latch High
         0000DF52          = T1LL            .equ    $00DF52         ; Timer 1 Latch Low
         0000DF53          = T1LH            .equ    $00DF53         ; Timer 1 Latch High
         0000DF54          = T2LL            .equ    $00DF54         ; Timer 2 Latch Low
         0000DF55          = T2LH            .equ    $00DF55         ; Timer 2 Latch High
         0000DF56          = T3LL            .equ    $00DF56         ; Timer 3 Latch Low
         0000DF57          = T3LH            .equ    $00DF57         ; Timer 3 Latch High
         0000DF58          = T4LL            .equ    $00DF58         ; Timer 4 Latch Low
         0000DF59          = T4LH            .equ    $00DF59         ; Timer 4 Latch High
         0000DF5A          = T5LL            .equ    $00DF5A         ; Timer 5 Latch Low
         0000DF5B          = T5LH            .equ    $00DF5B         ; Timer 5 Latch High
         0000DF5C          = T6LL            .equ    $00DF5C         ; Timer 6 Latch Low
         0000DF5D          = T6LH            .equ    $00DF5D         ; Timer 6 Latch High
         0000DF5E          = T7LL            .equ    $00DF5E         ; Timer 7 Latch Low

Portable 65xx Assembler [17.12]

         0000DF5F          = T7LH            .equ    $00DF5F         ; Timer 7 Latch High
         0000DF60          = T0CL            .equ    $00DF60         ; Timer 0 Counter Low
         0000DF61          = T0CH            .equ    $00DF61         ; Timer 0 Counter High
         0000DF62          = T1CL            .equ    $00DF62         ; Timer 1 Counter Low
         0000DF63          = T1CH            .equ    $00DF63         ; Timer 1 Counter High
         0000DF64          = T2CL            .equ    $00DF64         ; Timer 2 Counter Low
         0000DF65          = T2CH            .equ    $00DF65         ; Timer 2 Counter High
         0000DF66          = T3CL            .equ    $00DF66         ; Timer 3 Counter Low
         0000DF67          = T3CH            .equ    $00DF67         ; Timer 3 Counter High
         0000DF68          = T4CL            .equ    $00DF68         ; Timer 4 Counter Low
         0000DF69          = T4CH            .equ    $00DF69         ; Timer 4 Counter High
         0000DF6A          = T5CL            .equ    $00DF6A         ; Timer 5 Counter Low
         0000DF6B          = T5CH            .equ    $00DF6B         ; Timer 5 Counter High
         0000DF6C          = T6CL            .equ    $00DF6C         ; Timer 6 Counter Low
         0000DF6D          = T6CH            .equ    $00DF6D         ; Timer 6 Counter High
         0000DF6E          = T7CL            .equ    $00DF6E         ; Timer 7 Counter Low
         0000DF6F          = T7CH            .equ    $00DF6F         ; Timer 7 Counter High
                             
                             ;00DFC0-FF CS1 COProcessor Expansion uninitialized
                             
         0000DF70          = ACSR0           .equ    $00DF70         ; UART 0 Control/Status Register
         0000DF71          = ARTD0           .equ    $00DF71         ; UART 0 Data Register
         0000DF72          = ACSR1           .equ    $00DF72         ; UART 1 Control/Status Register
         0000DF73          = ARTD1           .equ    $00DF73         ; UART 1 Data Register
         0000DF74          = ACSR2           .equ    $00DF74         ; UART 2 Control/Status Register
         0000DF75          = ARTD2           .equ    $00DF75         ; UART 2 Data Register
         0000DF76          = ACSR3           .equ    $00DF76         ; UART 3 Control/Status Register
         0000DF77          = ARTD3           .equ    $00DF77         ; UART 3 Data Register
         0000DF78          = PIBFR           .equ    $00DF78         ; Parallel Interface Flag Register
         0000DF79          = PIBER           .equ    $00DF79         ; Parallel Interface Enable Register
         0000DF7A          = PIR2            .equ    $00DF7A         ; Parallel Interface Register 2
         0000DF7B          = PIR3            .equ    $00DF7B         ; Parallel Interface Register 3
         0000DF7C          = PIR4            .equ    $00DF7C         ; Parallel Interface Register 4
         0000DF7D          = PIR5            .equ    $00DF7D         ; Parallel Interface Register 5
         0000DF7E          = PIR6            .equ    $00DF7E         ; Parallel Interface Register 6
         0000DF7F          = PIR7            .equ    $00DF7F         ; Parallel Interface Register 7
                             
                             ;00DF80-BF RAM RAM Registers uninitialized
                             
                                             .include "w65c816.inc"
                             ;==============================================================================
                             ; __        ____  ____   ____ ___  _  __   
                             ; \ \      / / /_| ___| / ___( _ )/ |/ /_  
                             ;  \ \ /\ / / '_ \___ \| |   / _ \| | '_ \ 
                             ;   \ V  V /| (_) |__) | |__| (_) | | (_) |
                             ;    \_/\_/  \___/____/ \____\___/|_|\___/ 
                             ;
                             ; Western Design Center W65C816 device definitions                                          
                             ;------------------------------------------------------------------------------
                             ; Copyright (C)2015 HandCoded Software Ltd.
                             ; All rights reserved.
                             ;
                             ; This work is made available under the terms of the Creative Commons
                             ; Attribution-NonCommercial-ShareAlike 4.0 International license. Open the

Portable 65xx Assembler [17.12]

                             ; following URL to see the details.
                             ;
                             ; http://creativecommons.org/licenses/by-nc-sa/4.0/
                             ;
                             ;===============================================================================
                             ; Notes:
                             ;
                             ; Various macros and definitions for the W65C816 microprocessor.
                             ;
                             ;===============================================================================
                             ; Revision History:
                             ;
                             ; 2015-12-18 AJ Initial version
                             ;-------------------------------------------------------------------------------
                             
                             ;==============================================================================
                             ; Status Register Bits
                             ;------------------------------------------------------------------------------
                             
         00000080          = N_FLAG          .equ    1<<7
         00000040          = V_FLAG          .equ    1<<6
         00000020          = M_FLAG          .equ    1<<5
         00000010          = X_FLAG          .equ    1<<4
         00000010          = B_FLAG          .equ    1<<4
         00000008          = D_FLAG          .equ    1<<3
         00000004          = I_FLAG          .equ    1<<2
         00000002          = Z_FLAG          .equ    1<<1
         00000001          = C_FLAG          .equ    1<<0
                             
                             ;==============================================================================
                             ; Macros
                             ;------------------------------------------------------------------------------
                             
                             ; Puts the processor in emulation mode. A, X and Y become 8-bits and the stack
                             ; is fixed at $0100-$01ff. 
                             
                             emulate         .macro
                                             sec
                                             xce
                                             .endm
                             
                             ; Puts the processor in native mode. The size of the memory and index register
                             ; operations is not controlled by the M & X bits in the status register.
                             
                             native          .macro
                                             clc
                                             xce
                                             .endm
                             
                             ; Resets the M bit making the accumulator and memory accesses 16-bits wide.
                              
                             long_a          .macro
                                             rep     #M_FLAG
                                             .longa  on

Portable 65xx Assembler [17.12]

                                             .endm
                             
                             ; Resets the X bit making the index registers 16-bits wide
                             
                             long_i          .macro
                                             rep     #X_FLAG
                                             .longi  on
                                             .endm
                             
                             ; Resets the M and X bits making the accumulator, memory accesses and index
                             ; registers 16-bits wide.
                                             
                             long_ai         .macro
                                             rep     #M_FLAG|X_FLAG
                                             .longa  on
                                             .longi  on
                                             .endm
                             
                             ; Sets the M bit making the accumulator and memory accesses 8-bits wide.
                             
                             short_a         .macro
                                             sep     #M_FLAG
                                             .longa  off
                                             .endm
                             
                             ; Sets the X bit making the index registers 8-bits wide.
                             
                             short_i         .macro
                                             sep     #X_FLAG
                                             .longi  off
                                             .endm
                                             
                             ; Sets the M & X bits making the accumulator, memory accesses and index
                             ; registers 8-bits wide.
                             
                             short_ai        .macro
                                             sep     #M_FLAG|X_FLAG
                                             .longa  off
                                             .longi  off
                                             .endm
                                             .include "w65c265sxb.inc"
                             ;==============================================================================
                             ; __        ____  ____   ____ ____   __  ____ ______  ______  
                             ; \ \      / / /_| ___| / ___|___ \ / /_| ___/ ___\ \/ / __ ) 
                             ;  \ \ /\ / / '_ \___ \| |     __) | '_ \___ \___ \\  /|  _ \ 
                             ;   \ V  V /| (_) |__) | |___ / __/| (_) |__) |__) /  \| |_) |
                             ;    \_/\_/  \___/____/ \____|_____|\___/____/____/_/\_\____/ 
                             ;
                             ; Western Design Center W65C265SXB Development Board Hardware Definitions
                             ;------------------------------------------------------------------------------
                             ; Copyright (C)2015 HandCoded Software Ltd.
                             ; All rights reserved.
                             ;
                             ; This work is made available under the terms of the Creative Commons

Portable 65xx Assembler [17.12]

                             ; Attribution-NonCommercial-ShareAlike 4.0 International license. Open the
                             ; following URL to see the details.
                             ;
                             ; http://creativecommons.org/licenses/by-nc-sa/4.0/
                             ;
                             ;==============================================================================
                             ; Notes:
                             ;
                             ;------------------------------------------------------------------------------
                             
         00384000          = OSC_FREQ        .equ    3686400         ; SXB runs at 3.6864MHz
                             
                             ;===============================================================================
                             ; Constants
                             ;-------------------------------------------------------------------------------
                             
         000003E8          = T0_HZ           .equ    1000
         00000E66          = T0_COUNT        .equ    OSC_FREQ / T0_HZ
                             
         00000017          = BRG_9600        .equ    OSC_FREQ / (16 * 9600)-1
                             
                             ; The starting addresses of the data memory area using (/CS7)
                             
         00C00000          = MEML            .equ    $c00000         ; Lo byte
         00C10000          = MEMH            .equ    $c10000         ; Hi byte
                             
                             ; CH376S USB Interface Commands
                             
         00000002          = SET_BAUDRATE    .equ    $02
         00000003          = ENTER_SLEEP     .equ    $03
         00000005          = RESET_ALL       .equ    $05
         00000006          = CHECK_EXIST     .equ    $06
         00000022          = GET_STATUS      .equ    $22
                             
         000000AA          = SET_FILE_NAME   .equ    $aa             ; FIX
                             
                             ;===============================================================================
                             ; Data Areas
                             ;-------------------------------------------------------------------------------
                             
                                             .page0
                                             .org    $00
                             
00:0000  0000              : ACCA            .space  2
00:0002  0000              : ACCB            .space  2
                             
00:0004  0000              : G               .space  2
00:0006  0000              : C               .space  2
00:0008  0000              : P               .space  2
                             
00:000A  0000              : W               .space  2
                             
00:000C  0000              : FI              .space  2
00:000E  0000              : FO              .space  2

Portable 65xx Assembler [17.12]

                             
                             ;-------------------------------------------------------------------------------
                             
                                             .bss
                                             .org    $0200
                             
00:0200  0000000000000000> : COMMAND         .space  256
                             
                             ;===============================================================================
                             ;-------------------------------------------------------------------------------
                             
                                             .code
                                             .org    $0400
                             
                                             .longa  off
                                             .longi  off
                             RESET:
00:0400  78                :                 sei
                                             emulate
00:0401  38                +                 sec
00:0402  FB                +                 xce
00:0403  A2FF              :                 ldx     #$ff
00:0405  9A                :                 txs
                             
                             ; Reset Hardware
                             
00:0406  A966              :                 lda     #<T0_COUNT              ; Set T0 for 1mSec
00:0408  8D60DF            :                 sta     T0CL
00:040B  A90E              :                 lda     #>T0_COUNT
00:040D  8D61DF            :                 sta     T0CH
                             
00:0410  A9F0              :                 lda     #%11110000              ; Set UARTs to use timer 3
00:0412  1C42DF            :                 trb     TCR
00:0415  A917              :                 lda     #<BRG_9600              ; And set baud rate
00:0417  8D66DF            :                 sta     T3CL
00:041A  A900              :                 lda     #>BRG_9600
00:041C  8D67DF            :                 sta     T3CH
                             
00:041F  A909              :                 lda     #(1<<0)|(1<<3)          ; Enable timers 0 & 3
00:0421  0C43DF            :                 tsb     TER
                             
00:0424  A925              :                 lda     #%00100101              ; Set UART3 & 2 for 8-N-1
00:0426  8D76DF            :                 sta     ACSR3
00:0429  8D74DF            :                 sta     ACSR2
                             
                                             native
00:042C  18                +                 clc
00:042D  FB                +                 xce
                                             long_i
00:042E  C210              +                 rep     #X_FLAG
                           +                 .longi  on
                                             
00:0430  203507            :                 jsr     NewLine
00:0433  A27407            :                 ldx     #BOOT_STRING

Portable 65xx Assembler [17.12]

00:0436  203807            :                 jsr     Print
                                     
                             ; Mount Disk
                             
                             ; Read Command
                             
00:0439  203507            :                 jsr     NewLine
                                             
00:043C  A915              :                 lda     #$15
00:043E  200D07            :                 jsr     SendCommand
00:0441  A906              :                 lda     #$06
00:0443  204407            :                 jsr     DiskTx
                                             repeat
00:0446  A964              :                  lda    #100
00:0448  205407            :                  jsr    DiskRx
00:044B  B005              :                  if cc
00:044D  205A04            :                   jsr   Hex2
00:0450  8005              :                  else
00:0452  A92E              :                   lda   #'.'
00:0454  201D07            :                   jsr   UartTx
                                              endif
00:0457  80ED              :                 forever
                             
00:0459  00                :                 brk
                             
                             
                             ; Load Target
                             
                             
                             Hex2:
00:045A  48                :                 pha
00:045B  4A                :                 lsr     a
00:045C  4A                :                 lsr     a
00:045D  4A                :                 lsr     a
00:045E  4A                :                 lsr     a
00:045F  206304            :                 jsr     Hex
00:0462  68                :                 pla
                             Hex:
00:0463  290F              :                 and     #$0f
00:0465  0930              :                 ora     #'0'
00:0467  C93A              :                 cmp     #'9'+1
00:0469  9002              :                 if      cs
00:046B  6906              :                  adc    #6
                                             endif
00:046D  4C1D07            :                 jmp     UartTx
                             
                             ;===============================================================================
                             ; INTCODE Interpreter
                             ;-------------------------------------------------------------------------------
                             
                             ;        15  14  13  12  11  10  9   8   7   6   5   4   3   2   1   0
                             ;       +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
                             ;   +0  |  Opcode   | I | P | G | X |       Operand (when X = 0)        |
                             ;       +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+

Portable 65xx Assembler [17.12]

                             ;   +1  |                     Operand (when X = 1)                      |
                             ;       +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
                             
                                             .longa  on
                                             .longi  on
                             
00:0470  6400              :                 stz     ACCA
00:0472  6402              :                 stz     ACCB
                             
00:0474  640E              :                 stz     FO
00:0476  640E              :                 stz     FO
00:0478  E60E              :                 inc     FO
                             
                             Step:
00:047A  A606              :                 ldx     C               ; Fetch the next instruction
                                             short_a
00:047C  E220              +                 sep     #M_FLAG
                           +                 .longa  off
00:047E  BF0000C1          :                 lda     >MEMH,x
00:0482  EB                :                 xba
00:0483  BF0000C0          :                 lda     >MEML,x
                                             long_a
00:0487  C220              +                 rep     #M_FLAG
                           +                 .longa  on
00:0489  E8                :                 inx
00:048A  850A              :                 sta     W
                             
00:048C  890002            :                 bit     #$0200          ; Short operand?
00:048F  D006              :                 if eq                   ; Yes, extract from instruction
00:0491  29FF01            :                  and    #$01ff
00:0494  A8                :                  tay
00:0495  800F              :                 else
                                              short_a                ; No, fetch from next word
00:0497  E220              +                 sep     #M_FLAG
                           +                 .longa  off
00:0499  BF0000C1          :                  lda    >MEMH,x
00:049D  EB                :                  xba
00:049E  BF0000C0          :                  lda    >MEML,x
                                              long_a
00:04A2  C220              +                 rep     #M_FLAG
                           +                 .longa  on
00:04A4  E8                :                  inx
00:04A5  A8                :                  tay                    ; Save in Y
                                             endif
00:04A6  8606              :                 stx     C               ; Update program counter
                             
00:04A8  A50A              :                 lda     W
00:04AA  890008            :                 bit     #$0800          ; Relative to stack?
00:04AD  F007              :                 if ne
00:04AF  18                :                  clc
00:04B0  98                :                  tya
00:04B1  6508              :                  adc    P
00:04B3  A8                :                  tay
00:04B4  800A              :                 else

Portable 65xx Assembler [17.12]

00:04B6  890004            :                  bit    #$0400          ; Relative to global vector?
00:04B9  F005              :                  if ne
00:04BB  18                :                   clc
00:04BC  98                :                   tya
00:04BD  6504              :                   adc   G
00:04BF  A8                :                   tay
                                              endif
                                             endif
                             
00:04C0  A50A              :                 lda     W
00:04C2  890010            :                 bit     #$1000          ; Indirect memory address?
00:04C5  F00F              :                 if ne
00:04C7  BB                :                  tyx                    ; Yes, look up address
                                              short_a
00:04C8  E220              +                 sep     #M_FLAG
                           +                 .longa  off
00:04CA  BF0000C1          :                  lda    >MEMH,x
00:04CE  EB                :                  xba
00:04CF  BF0000C0          :                  lda    >MEML,x
                                              long_a
00:04D3  C220              +                 rep     #M_FLAG
                           +                 .longa  on
00:04D5  A8                :                  tay                    ; And save in Y
                                             endif
                             
00:04D6  A50A              :                 lda     W               ; Extract opcode
00:04D8  2900E0            :                 and     #$e000
00:04DB  EB                :                 xba
00:04DC  4A                :                 lsr     a
00:04DD  4A                :                 lsr     a
00:04DE  4A                :                 lsr     a
00:04DF  4A                :                 lsr     a
00:04E0  AA                :                 tax
00:04E1  7CE404            :                 jmp     (Opcode,x)
                             Opcode:
00:04E4  F404              :                 .word   OpcodeL
00:04E6  0B05              :                 .word   OpcodeS
00:04E8  1E05              :                 .word   OpcodeA
00:04EA  2705              :                 .word   OpcodeJ
00:04EC  2C05              :                 .word   OpcodeT
00:04EE  3505              :                 .word   OpcodeF
00:04F0  3E05              :                 .word   OpcodeK
00:04F2  4105              :                 .word   OpcodeX
                             
                             ;-------------------------------------------------------------------------------
                             ; Memory Load
                             
                             OpcodeL:
00:04F4  A500              :                 lda     ACCA            ; Transfer A into B
00:04F6  8502              :                 sta     ACCB
00:04F8  BB                :                 tyx                     ; Load from M[D]
                                             short_a
00:04F9  E220              +                 sep     #M_FLAG
                           +                 .longa  off

Portable 65xx Assembler [17.12]

00:04FB  BF0000C1          :                 lda     >MEMH,x
00:04FF  EB                :                 xba
00:0500  BF0000C0          :                 lda     >MEML,x
                                             long_a
00:0504  C220              +                 rep     #M_FLAG
                           +                 .longa  on
00:0506  8500              :                 sta     ACCA            ; Save in A
00:0508  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Memory Store
                             
                             OpcodeS:
00:050B  A500              :                 lda     ACCA
00:050D  BB                :                 tyx
                                             short_a
00:050E  E220              +                 sep     #M_FLAG
                           +                 .longa  off
00:0510  9F0000C0          :                 sta     >MEML,x
00:0514  EB                :                 xba
00:0515  9F0000C1          :                 sta     >MEMH,x
                                             long_a
00:0519  C220              +                 rep     #M_FLAG
                           +                 .longa  on
00:051B  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Addition
                             
                             OpcodeA:
00:051E  18                :                 clc
00:051F  98                :                 tya
00:0520  6500              :                 adc     ACCA
00:0522  8500              :                 sta     ACCA
00:0524  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Unconditional Jump
                             
                             OpcodeJ:
00:0527  8406              :                 sty     C
00:0529  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Jump if True
                             
                             OpcodeT:
00:052C  A500              :                 lda     ACCA
00:052E  F002              :                 if ne
00:0530  8406              :                  sty    C
                                             endif
00:0532  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------

Portable 65xx Assembler [17.12]

                             ; Jump if False
                             
                             OpcodeF:
00:0535  A500              :                 lda     ACCA
00:0537  D002              :                 if eq
00:0539  8406              :                  sty    C
                                             endif
00:053B  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Call
                             
                             OpcodeK:
                             
00:053E  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Execute Function
                             
                             OpcodeX:
00:0541  98                :                 tya                     ; Get function index
00:0542  F00B              :                 if ne                   ; Not zero?
00:0544  C92800            :                  cmp    #40             ; .. but less than 40?
00:0547  B006              :                  if cc
00:0549  3A                :                   dec   a               ; Scale to jump table index
00:054A  0A                :                   asl   a
00:054B  AA                :                   tax
00:054C  7C5105            :                   jmp   (Function,x)    ; And goto to handler
                                              endif
                                             endif
                             
00:054F  80FE              :                 bra     $               ; FIX: Invalid function
                             
                             Function:
00:0551  9F05              :                 .word   Function1
00:0553  B305              :                 .word   Function2
00:0555  BE05              :                 .word   Function3
00:0557  C805              :                 .word   Function4
00:0559  C805              :                 .word   Function5
00:055B  C805              :                 .word   Function6
00:055D  C805              :                 .word   Function7
00:055F  C805              :                 .word   Function8
00:0561  D205              :                 .word   Function9
00:0563  DC05              :                 .word   Function10
00:0565  E905              :                 .word   Function11
00:0567  F605              :                 .word   Function12
00:0569  F905              :                 .word   Function13
00:056B  FC05              :                 .word   Function14
00:056D  FF05              :                 .word   Function15
00:056F  0206              :                 .word   Function16
00:0571  1B06              :                 .word   Function17
00:0573  3406              :                 .word   Function18
00:0575  3D06              :                 .word   Function19
00:0577  4606              :                 .word   Function20

Portable 65xx Assembler [17.12]

00:0579  4F06              :                 .word   Function21
00:057B  5B06              :                 .word   Function22
00:057D  5D06              :                 .word   Function23
00:057F  6006              :                 .word   Function24
00:0581  6806              :                 .word   Function25
00:0583  7006              :                 .word   Function26
00:0585  7306              :                 .word   Function27
00:0587  7606              :                 .word   Function28
00:0589  7906              :                 .word   Function29
00:058B  7C06              :                 .word   Function30
00:058D  7F06              :                 .word   Function31
00:058F  9306              :                 .word   Function32
00:0591  9E06              :                 .word   Function33
00:0593  A106              :                 .word   Function34
00:0595  A406              :                 .word   Function35
00:0597  A706              :                 .word   Function36
00:0599  C806              :                 .word   Function37
00:059B  EB06              :                 .word   Function38
00:059D  F306              :                 .word   Function39
                             
                             ;-------------------------------------------------------------------------------
                             ; A = M[A]
                             
                             Function1:
00:059F  A600              :                 ldx     ACCA            ; Fetch memory address
                                             short_a
00:05A1  E220              +                 sep     #M_FLAG
                           +                 .longa  off
00:05A3  BF0000C1          :                 lda     >MEMH,x         ; Recover the value
00:05A7  EB                :                 xba
00:05A8  BF0000C0          :                 lda     >MEML,x
                                             long_a
00:05AC  C220              +                 rep     #M_FLAG
                           +                 .longa  on
00:05AE  8500              :                 sta     ACCA            ; And store
00:05B0  4C7A04            :                 jmp     Step            ; Done.
                             
                             ;-------------------------------------------------------------------------------
                             ; A = -A
                             
                             Function2:
00:05B3  38                :                 sec
00:05B4  A90000            :                 lda     #0              ; Subtract A from zero
00:05B7  E500              :                 sbc     ACCA
00:05B9  8500              :                 sta     ACCA            ; And store
00:05BB  4C7A04            :                 jmp     Step            ; Done.
                             
                             ;-------------------------------------------------------------------------------
                             ; A = ~A
                             
                             Function3:
00:05BE  A9FFFF            :                 lda     #$ffff          ; Invert all bits in A
00:05C1  4500              :                 eor     ACCA
00:05C3  8500              :                 sta     ACCA            ; And store

Portable 65xx Assembler [17.12]

00:05C5  4C7A04            :                 jmp     Step            ; Done.
                             
                             ;-------------------------------------------------------------------------------
                             
                             Function4:
                             Function5:
                             Function6:
                             Function7:
                             
                             ;-------------------------------------------------------------------------------
                             ; A = B + A
                             
                             Function8:
00:05C8  18                :                 clc
00:05C9  A502              :                 lda     ACCB
00:05CB  6500              :                 adc     ACCA
00:05CD  8500              :                 sta     ACCA
00:05CF  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = B - A
                             
                             Function9:
00:05D2  38                :                 sec
00:05D3  A502              :                 lda     ACCB
00:05D5  E500              :                 sbc     ACCA
00:05D7  8500              :                 sta     ACCA
00:05D9  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = (B == A)
                             
                             Function10:
00:05DC  A500              :                 lda     ACCA
00:05DE  6400              :                 stz     ACCA
00:05E0  C502              :                 cmp     ACCB
00:05E2  D002              :                 if eq
00:05E4  C600              :                  dec    ACCA
                                             endif
00:05E6  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = (B != A)
                             
                             Function11:
00:05E9  A500              :                 lda     ACCA
00:05EB  6400              :                 stz     ACCA
00:05ED  C502              :                 cmp     ACCB
00:05EF  F002              :                 if ne
00:05F1  C600              :                  dec    ACCA
                                             endif
00:05F3  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------

Portable 65xx Assembler [17.12]

                             
                             Function12:
00:05F6  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             
                             Function13:
00:05F9  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             
                             Function14:
00:05FC  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             
                             Function15:
00:05FF  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = B << A
                             
                             Function16:
00:0602  A502              :                 lda     ACCB
00:0604  A600              :                 ldx     ACCA
00:0606  F00E              :                 if ne
00:0608  E01600            :                  cpx    #$16
00:060B  9005              :                  if cs
00:060D  6400              :                   stz   ACCA
00:060F  4C7A04            :                   jmp   Step
                                              endif
                                              repeat
00:0612  0A                :                   asl   a
00:0613  CA                :                   dex
00:0614  D0FC              :                  until eq
                                             endif
00:0616  8500              :                 sta     ACCA
00:0618  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = B >> A
                             
                             Function17:
00:061B  A502              :                 lda     ACCB
00:061D  A600              :                 ldx     ACCA
00:061F  F00E              :                 if ne
00:0621  E01600            :                  cpx    #$16
00:0624  9005              :                  if cs
00:0626  6400              :                   stz   ACCA
00:0628  4C7A04            :                   jmp   Step
                                              endif
                                              repeat
00:062B  4A                :                   lsr   a
00:062C  CA                :                   dex

Portable 65xx Assembler [17.12]

00:062D  D0FC              :                  until eq
                                             endif
00:062F  8500              :                 sta     ACCA
00:0631  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = B & A
                             
                             Function18:
00:0634  A502              :                 lda     ACCB
00:0636  2500              :                 and     ACCA
00:0638  8500              :                 sta     ACCA
00:063A  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = B | A
                             
                             Function19:
00:063D  A502              :                 lda     ACCB
00:063F  0500              :                 ora     ACCA
00:0641  8500              :                 sta     ACCA
00:0643  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = B ^ A
                             
                             Function20:
00:0646  A502              :                 lda     ACCB
00:0648  4500              :                 eor     ACCA
00:064A  8500              :                 sta     ACCA
00:064C  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = ~(B ^ A)
                             
                             Function21:
00:064F  A502              :                 lda     ACCB
00:0651  4500              :                 eor     ACCA
00:0653  49FFFF            :                 eor     #$ffff
00:0656  8500              :                 sta     ACCA
00:0658  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             
                             Function22:
00:065B  80FE              :                 bra     $               ; FIX: Exit
                             
                             ;-------------------------------------------------------------------------------
                             
                             Function23:
00:065D  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; FI = A-1

Portable 65xx Assembler [17.12]

                             
                             Function24:
00:0660  A500              :                 lda     ACCA
00:0662  3A                :                 dec     a
00:0663  850C              :                 sta     FI
00:0665  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; FO = A-1
                             
                             Function25:
00:0668  A500              :                 lda     ACCA
00:066A  3A                :                 dec     a
00:066B  850E              :                 sta     FO
00:066D  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Read a byte
                             
                             Function26:
00:0670  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Write a byte
                             
                             Function27:
00:0673  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Open for read
                             
                             Function28:
00:0676  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Open for write
                             
                             Function29:
00:0679  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; Stop
                             
                             Function30:
00:067C  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = M[P]
                             
                             Function31:
00:067F  A608              :                 ldx     P
                                             short_a
00:0681  E220              +                 sep     #M_FLAG
                           +                 .longa  off

Portable 65xx Assembler [17.12]

00:0683  BF0000C1          :                 lda     >MEMH,x
00:0687  EB                :                 xba
00:0688  BF0000C0          :                 lda     >MEML,x
                                             long_a
00:068C  C220              +                 rep     #M_FLAG
                           +                 .longa  on
00:068E  8500              :                 sta     ACCA
00:0690  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; P,C = A,B
                             
                             Function32:
00:0693  A500              :                 lda     ACCA
00:0695  8508              :                 sta     P
00:0697  A502              :                 lda     ACCB
00:0699  8506              :                 sta     C
00:069B  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             
                             Function33:
00:069E  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             
                             Function34:
00:06A1  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             
                             Function35:
00:06A4  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; GETBYTE (A,B)
                             
                             Function36:
00:06A7  A502              :                 lda     ACCB            ; Work out byte offset
00:06A9  4A                :                 lsr     a
00:06AA  08                :                 php                     ; Save carry
00:06AB  18                :                 clc                     ; Add base word address
00:06AC  6500              :                 adc     ACCA
00:06AE  AA                :                 tax                     ; Save in index register
00:06AF  28                :                 plp                     ; Pull back carry
                                             short_a
00:06B0  E220              +                 sep     #M_FLAG
                           +                 .longa  off
00:06B2  B006              :                 if cc
00:06B4  BF0000C1          :                  lda    >MEMH,x         ; Load from either high
00:06B8  8004              :                 else
00:06BA  BF0000C0          :                  lda    >MEML,x         ; .. or low byte
                                             endif
                                             long_a

Portable 65xx Assembler [17.12]

00:06BE  C220              +                 rep     #M_FLAG
                           +                 .longa  on
00:06C0  29FF00            :                 and     #$00ff          ; Mask to byte value
00:06C3  8500              :                 sta     ACCA            ; And save
00:06C5  4C7A04            :                 jmp     Step            ; Done
                             
                             ;-------------------------------------------------------------------------------
                             ; PUTBYTE(A,B,M[P+4])
                             
                             Function37:
00:06C8  A502              :                 lda     ACCB            ; Work out byte offset
00:06CA  4A                :                 lsr     a
00:06CB  08                :                 php                     ; Save carry
00:06CC  18                :                 clc                     ; Add base word address
00:06CD  6500              :                 adc     ACCA
00:06CF  A8                :                 tay                     ; Save in index register
00:06D0  A608              :                 ldx     P               ; Fetch stack pointer
00:06D2  28                :                 plp                     ; Pull back carry
                                             short_a
00:06D3  E220              +                 sep     #M_FLAG
                           +                 .longa  off
00:06D5  BF0400C0          :                 lda     >MEML+4,x       ; Fetch byte to store
00:06D9  BB                :                 tyx
00:06DA  B006              :                 if cc
00:06DC  9F0000C1          :                  sta    >MEMH,x         ; Save in either high
00:06E0  8004              :                 else
00:06E2  9F0000C0          :                  sta    >MEML,x         ; .. or low byte
                                             endif
                                             long_a
00:06E6  C220              +                 rep     #M_FLAG
                           +                 .longa  on
00:06E8  4C7A04            :                 jmp     Step            ; Done.
                             
                             ;-------------------------------------------------------------------------------
                             ; A = FI+1
                             
                             Function38:
00:06EB  A50C              :                 lda     FI
00:06ED  1A                :                 inc     a
00:06EE  8500              :                 sta     ACCA
00:06F0  4C7A04            :                 jmp     Step
                             
                             ;-------------------------------------------------------------------------------
                             ; A = FO+1
                             
                             Function39:
00:06F3  A50E              :                 lda     FO
00:06F5  1A                :                 inc     a
00:06F6  8500              :                 sta     ACCA
00:06F8  4C7A04            :                 jmp     Step
                             
                             ;===============================================================================
                             ; CH376S Module Interface
                             ;-------------------------------------------------------------------------------

Portable 65xx Assembler [17.12]

                             
                             
                                             .longa  off
                             SetFileName:
00:06FB  A9AA              :                 lda     #SET_FILE_NAME  ; Send command
00:06FD  200D07            :                 jsr     SendCommand
                                             repeat
00:0700  BD0000            :                  lda    !0,x            ; Followed by null terminated
00:0703  08                :                  php                    ; .. string
00:0704  204407            :                  jsr    DiskTx
00:0707  28                :                  plp
00:0708  D0F6              :                 until eq
00:070A  4C1C07            :                 jmp     ReadStatus
                             
                             
                             ; Transmit the command synchronisation prefix to the CH376 followed by the
                             ; command code.
                             
                                             .longa  off
                             SendCommand:
00:070D  48                :                 pha                     ; Save the command
00:070E  A957              :                 lda     #$57            ; Send the prefix
00:0710  204407            :                 jsr     DiskTx
00:0713  A9AB              :                 lda     #$ab
00:0715  204407            :                 jsr     DiskTx
00:0718  68                :                 pla                     ; Recover command
00:0719  4C4407            :                 jmp     DiskTx          ; And send
                             
                             ;
                                             .longa  off
                             ReadStatus:
00:071C  60                :                 rts
                             
                             ;===============================================================================
                             ; UART Interfaces
                             ;-------------------------------------------------------------------------------
                             
                             ; Use UART3 to communicate with the console
                             ; Use UART2 to communicate with the CH376S module
                             
                                             .longa  off
                             UartTx:
00:071D  48                :                 pha
00:071E  A980              :                 lda     #1<<7
                                             repeat
00:0720  2C48DF            :                  bit    UIFR
00:0723  F0FB              :                 until   ne
00:0725  68                :                 pla
00:0726  8D77DF            :                 sta     ARTD3
00:0729  60                :                 rts
                             
                                             .longa  off
                             UartRx:
00:072A  A940              :                 lda     #1<<6

Portable 65xx Assembler [17.12]

                                             repeat
00:072C  2C48DF            :                  bit    UIFR
00:072F  F0FB              :                 until   ne
00:0731  AD77DF            :                 lda     ARTD3
00:0734  60                :                 rts
                                             
                                             .longi  on
                             NewLine:
00:0735  A28D07            :                 ldx     #CRLF_STRING
                                             
                             Print:
                                             repeat
00:0738  BD0000            :                  lda    !0,x
00:073B  F006              :                  break  eq
00:073D  201D07            :                  jsr    UartTx
00:0740  E8                :                  inx
00:0741  80F5              :                 forever
00:0743  60                :                 rts
                             
                             ;-------------------------------------------------------------------------------
                             
                                             .longa  off
                             DiskTx:
00:0744  48                :                 pha
00:0745  A920              :                 lda     #1<<5
                                             repeat
00:0747  2C48DF            :                  bit    UIFR
00:074A  F0FB              :                 until   ne
00:074C  68                :                 pla
00:074D  8D75DF            :                 sta     ARTD2
00:0750  4C5A04            :         jmp     Hex2
00:0753  60                :                 rts
                             
                             
                                             .longa  off
                             DiskRx:
                                             repeat
00:0754  48                :                  pha                    ; Save the timeout count
00:0755  A901              :                  lda    #1<<0           ; Clear timer0 interrupt flag
00:0757  1C44DF            :                  trb    TIFR
                                              repeat
00:075A  A910              :                   lda   #1<<4           ; Has some data arrived?
00:075C  2C48DF            :                   bit   UIFR
00:075F  F006              :                   if ne
00:0761  68                :                    pla                  ; Yes, drop the timeout count
00:0762  AD75DF            :                    lda  ARTD2           ; Fetch the serial data
00:0765  18                :                    clc                  ; Indicate data read
00:0766  60                :                    rts                  ; Done.
                                               endif
00:0767  A901              :                   lda   #1<<0           ; Has T0 rolled over?
00:0769  2C44DF            :                   bit   TIFR
00:076C  F0EC              :                  until ne
00:076E  68                :                  pla
00:076F  3A                :                  dec    a

Portable 65xx Assembler [17.12]

00:0770  D0E2              :                 until   eq
00:0772  38                :                 sec                     ; Indicate timeout
00:0773  60                :                 rts                     ; Done.
                                             
                             ;===============================================================================
                             ;-------------------------------------------------------------------------------
                             
00:0774  0D0A573635433236> : BOOT_STRING     .byte   $0d,$0a,"W65C265SXB BCPL [18.03]"
00:078D  0D0A00            : CRLF_STRING     .byte   $0d,$0a,$00
                             
                             
                             ;               .org    $fffc
                             ;               .word   RESET
                             
                                             .end


Portable 65xx Assembler [17.12]

Symbol Table

ACCA                             00000000  | ACCA                             00000000 
ACCB                             00000002  | __6501__                         00000000 
ACSR0                            0000DF70  | __6502__                         00000000 
ACSR1                            0000DF72  | __65832__                        00000000 
ACSR2                            0000DF74  | __65C02__                        00000000 
ACSR3                            0000DF76  | __65SC02__                       00000000 
ARTD0                            0000DF71  | C_FLAG                           00000001 
ARTD1                            0000DF73  | __65816__                        00000001 
ARTD2                            0000DF75  | ACCB                             00000002 
ARTD3                            0000DF77  | SET_BAUDRATE                     00000002 
BCR                              0000DF40  | Z_FLAG                           00000002 
BOOT_STRING                      00000774  | ENTER_SLEEP                      00000003 
BRG_9600                         00000017  | G                                00000004 
B_FLAG                           00000010  | I_FLAG                           00000004 
C                                00000006  | RESET_ALL                        00000005 
CHECK_EXIST                      00000006  | C                                00000006 
COMMAND                          00000200  | CHECK_EXIST                      00000006 
CRLF_STRING                      0000078D  | D_FLAG                           00000008 
C_FLAG                           00000001  | P                                00000008 
D_FLAG                           00000008  | W                                0000000A 
DiskRx                           00000754  | FI                               0000000C 
DiskTx                           00000744  | FO                               0000000E 
EIER                             0000DF47  | B_FLAG                           00000010 
EIFR                             0000DF45  | X_FLAG                           00000010 
ENTER_SLEEP                      00000003  | BRG_9600                         00000017 
FI                               0000000C  | M_FLAG                           00000020 
FO                               0000000E  | GET_STATUS                       00000022 
Function                         00000551  | V_FLAG                           00000040 
Function1                        0000059F  | N_FLAG                           00000080 
Function10                       000005DC  | SET_FILE_NAME                    000000AA 
Function11                       000005E9  | COMMAND                          00000200 
Function12                       000005F6  | T0_HZ                            000003E8 
Function13                       000005F9  | RESET                            00000400 
Function14                       000005FC  | Hex2                             0000045A 
Function15                       000005FF  | Hex                              00000463 
Function16                       00000602  | Step                             0000047A 
Function17                       0000061B  | Opcode                           000004E4 
Function18                       00000634  | OpcodeL                          000004F4 
Function19                       0000063D  | OpcodeS                          0000050B 
Function2                        000005B3  | OpcodeA                          0000051E 
Function20                       00000646  | OpcodeJ                          00000527 
Function21                       0000064F  | OpcodeT                          0000052C 
Function22                       0000065B  | OpcodeF                          00000535 
Function23                       0000065D  | OpcodeK                          0000053E 
Function24                       00000660  | OpcodeX                          00000541 
Function25                       00000668  | Function                         00000551 
Function26                       00000670  | Function1                        0000059F 
Function27                       00000673  | Function2                        000005B3 
Function28                       00000676  | Function3                        000005BE 
Function29                       00000679  | Function4                        000005C8 
Function3                        000005BE  | Function5                        000005C8 
Function30                       0000067C  | Function6                        000005C8 

Portable 65xx Assembler [17.12]

Function31                       0000067F  | Function7                        000005C8 
Function32                       00000693  | Function8                        000005C8 
Function33                       0000069E  | Function9                        000005D2 
Function34                       000006A1  | Function10                       000005DC 
Function35                       000006A4  | Function11                       000005E9 
Function36                       000006A7  | Function12                       000005F6 
Function37                       000006C8  | Function13                       000005F9 
Function38                       000006EB  | Function14                       000005FC 
Function39                       000006F3  | Function15                       000005FF 
Function4                        000005C8  | Function16                       00000602 
Function5                        000005C8  | Function17                       0000061B 
Function6                        000005C8  | Function18                       00000634 
Function7                        000005C8  | Function19                       0000063D 
Function8                        000005C8  | Function20                       00000646 
Function9                        000005D2  | Function21                       0000064F 
G                                00000004  | Function22                       0000065B 
GET_STATUS                       00000022  | Function23                       0000065D 
Hex                              00000463  | Function24                       00000660 
Hex2                             0000045A  | Function25                       00000668 
I_FLAG                           00000004  | Function26                       00000670 
MEMH                             00C10000  | Function27                       00000673 
MEML                             00C00000  | Function28                       00000676 
M_FLAG                           00000020  | Function29                       00000679 
N_FLAG                           00000080  | Function30                       0000067C 
NewLine                          00000735  | Function31                       0000067F 
OSC_FREQ                         00384000  | Function32                       00000693 
Opcode                           000004E4  | Function33                       0000069E 
OpcodeA                          0000051E  | Function34                       000006A1 
OpcodeF                          00000535  | Function35                       000006A4 
OpcodeJ                          00000527  | Function36                       000006A7 
OpcodeK                          0000053E  | Function37                       000006C8 
OpcodeL                          000004F4  | Function38                       000006EB 
OpcodeS                          0000050B  | Function39                       000006F3 
OpcodeT                          0000052C  | SetFileName                      000006FB 
OpcodeX                          00000541  | SendCommand                      0000070D 
P                                00000008  | ReadStatus                       0000071C 
PCS7                             0000DF27  | UartTx                           0000071D 
PD0                              0000DF00  | UartRx                           0000072A 
PD1                              0000DF01  | NewLine                          00000735 
PD2                              0000DF02  | Print                            00000738 
PD3                              0000DF03  | DiskTx                           00000744 
PD4                              0000DF20  | DiskRx                           00000754 
PD5                              0000DF21  | BOOT_STRING                      00000774 
PD6                              0000DF22  | CRLF_STRING                      0000078D 
PD7                              0000DF23  | T0_COUNT                         00000E66 
PDD0                             0000DF04  | PD0                              0000DF00 
PDD1                             0000DF05  | PD1                              0000DF01 
PDD2                             0000DF06  | PD2                              0000DF02 
PDD3                             0000DF07  | PD3                              0000DF03 
PDD4                             0000DF24  | PDD0                             0000DF04 
PDD5                             0000DF25  | PDD1                             0000DF05 
PDD6                             0000DF26  | PDD2                             0000DF06 
PIBER                            0000DF79  | PDD3                             0000DF07 
PIBFR                            0000DF78  | PD4                              0000DF20 

Portable 65xx Assembler [17.12]

PIR2                             0000DF7A  | PD5                              0000DF21 
PIR3                             0000DF7B  | PD6                              0000DF22 
PIR4                             0000DF7C  | PD7                              0000DF23 
PIR5                             0000DF7D  | PDD4                             0000DF24 
PIR6                             0000DF7E  | PDD5                             0000DF25 
PIR7                             0000DF7F  | PDD6                             0000DF26 
Print                            00000738  | PCS7                             0000DF27 
RESET                            00000400  | BCR                              0000DF40 
RESET_ALL                        00000005  | SSCR                             0000DF41 
ReadStatus                       0000071C  | TCR                              0000DF42 
SET_BAUDRATE                     00000002  | TER                              0000DF43 
SET_FILE_NAME                    000000AA  | TIFR                             0000DF44 
SSCR                             0000DF41  | EIFR                             0000DF45 
SendCommand                      0000070D  | TIER                             0000DF46 
SetFileName                      000006FB  | EIER                             0000DF47 
Step                             0000047A  | UIFR                             0000DF48 
T0CH                             0000DF61  | UIER                             0000DF49 
T0CL                             0000DF60  | T0LL                             0000DF50 
T0LH                             0000DF51  | T0LH                             0000DF51 
T0LL                             0000DF50  | T1LL                             0000DF52 
T0_COUNT                         00000E66  | T1LH                             0000DF53 
T0_HZ                            000003E8  | T2LL                             0000DF54 
T1CH                             0000DF63  | T2LH                             0000DF55 
T1CL                             0000DF62  | T3LL                             0000DF56 
T1LH                             0000DF53  | T3LH                             0000DF57 
T1LL                             0000DF52  | T4LL                             0000DF58 
T2CH                             0000DF65  | T4LH                             0000DF59 
T2CL                             0000DF64  | T5LL                             0000DF5A 
T2LH                             0000DF55  | T5LH                             0000DF5B 
T2LL                             0000DF54  | T6LL                             0000DF5C 
T3CH                             0000DF67  | T6LH                             0000DF5D 
T3CL                             0000DF66  | T7LL                             0000DF5E 
T3LH                             0000DF57  | T7LH                             0000DF5F 
T3LL                             0000DF56  | T0CL                             0000DF60 
T4CH                             0000DF69  | T0CH                             0000DF61 
T4CL                             0000DF68  | T1CL                             0000DF62 
T4LH                             0000DF59  | T1CH                             0000DF63 
T4LL                             0000DF58  | T2CL                             0000DF64 
T5CH                             0000DF6B  | T2CH                             0000DF65 
T5CL                             0000DF6A  | T3CL                             0000DF66 
T5LH                             0000DF5B  | T3CH                             0000DF67 
T5LL                             0000DF5A  | T4CL                             0000DF68 
T6CH                             0000DF6D  | T4CH                             0000DF69 
T6CL                             0000DF6C  | T5CL                             0000DF6A 
T6LH                             0000DF5D  | T5CH                             0000DF6B 
T6LL                             0000DF5C  | T6CL                             0000DF6C 
T7CH                             0000DF6F  | T6CH                             0000DF6D 
T7CL                             0000DF6E  | T7CL                             0000DF6E 
T7LH                             0000DF5F  | T7CH                             0000DF6F 
T7LL                             0000DF5E  | ACSR0                            0000DF70 
TCR                              0000DF42  | ARTD0                            0000DF71 
TER                              0000DF43  | ACSR1                            0000DF72 
TIER                             0000DF46  | ARTD1                            0000DF73 
TIFR                             0000DF44  | ACSR2                            0000DF74 

Portable 65xx Assembler [17.12]

UIER                             0000DF49  | ARTD2                            0000DF75 
UIFR                             0000DF48  | ACSR3                            0000DF76 
UartRx                           0000072A  | ARTD3                            0000DF77 
UartTx                           0000071D  | PIBFR                            0000DF78 
V_FLAG                           00000040  | PIBER                            0000DF79 
W                                0000000A  | PIR2                             0000DF7A 
X_FLAG                           00000010  | PIR3                             0000DF7B 
Z_FLAG                           00000002  | PIR4                             0000DF7C 
__6501__                         00000000  | PIR5                             0000DF7D 
__6502__                         00000000  | PIR6                             0000DF7E 
__65816__                        00000001  | PIR7                             0000DF7F 
__65832__                        00000000  | OSC_FREQ                         00384000 
__65C02__                        00000000  | MEML                             00C00000 
__65SC02__                       00000000  | MEMH                             00C10000 
